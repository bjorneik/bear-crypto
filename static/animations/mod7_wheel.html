<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Modular Arithmetic Wheel - Mod 7</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            overflow: hidden;
        }
        
        #canvas {
            max-width: 100%;
            max-height: 100%;
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Make canvas responsive
        function resizeCanvas() {
            const size = Math.min(window.innerWidth, window.innerHeight);
            canvas.width = size;
            canvas.height = size;
            return size / 800; // Scale factor relative to original 800px
        }
        
        let scale = resizeCanvas();
        window.addEventListener('resize', () => {
            scale = resizeCanvas();
            drawWheel();
        });
        
        const sectors = 7;
        
        // Define colors for each equivalence class
        const colors = [
            '#FF6B6B', // 0 mod 7 - Red
            '#4ECDC4', // 1 mod 7 - Teal
            '#45B7D1', // 2 mod 7 - Blue
            '#FFA07A', // 3 mod 7 - Light Salmon
            '#98D8C8', // 4 mod 7 - Mint
            '#F7DC6F', // 5 mod 7 - Yellow
            '#BB8FCE'  // 6 mod 7 - Purple
        ];
        
        // Layer radii (from innermost to outermost) - will be scaled
        const baseLayers = [
            { inner: 0, outer: 60, startNum: 0 },      // Core: 0-6
            { inner: 60, outer: 120, startNum: 7 },    // Layer 1: 7-13
            { inner: 120, outer: 180, startNum: 14 },  // Layer 2: 14-20
            { inner: 180, outer: 240, startNum: 21 },  // Layer 3: 21-27
            { inner: 240, outer: 300, startNum: 28 },  // Layer 4: 28-34
            { inner: 300, outer: 360, startNum: 35 }   // Layer 5: 35-41
        ];
        
        // Animation state
        let currentNumber = 0;
        const maxNumber = 41;
        const animationSpeed = 300; // milliseconds per number
        
        // Function to get scaled layers
        function getLayers() {
            return baseLayers.map(layer => ({
                inner: layer.inner * scale,
                outer: layer.outer * scale,
                startNum: layer.startNum
            }));
        }
        
        // Function to get layer and sector for a given number
        function getNumberPosition(num, layers) {
            for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {
                const layer = layers[layerIndex];
                if (num >= layer.startNum && num < layer.startNum + sectors) {
                    const sectorIndex = num - layer.startNum;
                    return { layerIndex, sectorIndex, layer };
                }
            }
            return null;
        }
        
        // Function to draw a single sector
        function drawSector(layerIndex, sectorIndex, number, opacity = 1) {
            const layers = getLayers();
            const layer = layers[layerIndex];
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            const startAngle = (sectorIndex * 2 * Math.PI / sectors) - Math.PI / 2;
            const endAngle = ((sectorIndex + 1) * 2 * Math.PI / sectors) - Math.PI / 2;
            
            // Draw sector
            ctx.beginPath();
            ctx.arc(cx, cy, layer.outer, startAngle, endAngle);
            ctx.arc(cx, cy, layer.inner, endAngle, startAngle, true);
            ctx.closePath();
            
            // Fill with color
            ctx.globalAlpha = opacity;
            ctx.fillStyle = colors[sectorIndex];
            ctx.fill();
            ctx.globalAlpha = 1;
            
            // Draw border
            ctx.strokeStyle = '#2C3E50';
            ctx.lineWidth = 2 * scale;
            ctx.stroke();
            
            // Add number label
            const midAngle = (startAngle + endAngle) / 2;
            const labelRadius = (layer.inner + layer.outer) / 2;
            const labelX = cx + labelRadius * Math.cos(midAngle);
            const labelY = cy + labelRadius * Math.sin(midAngle);
            
            ctx.globalAlpha = opacity;
            ctx.fillStyle = '#2C3E50';
            ctx.font = `bold ${24 * scale}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(number, labelX, labelY);
            ctx.globalAlpha = 1;
        }
        
        // Function to draw the entire wheel up to current number
        function drawWheel() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const layers = getLayers();
            
            // Draw all numbers up to currentNumber
            for (let num = 0; num <= currentNumber; num++) {
                const pos = getNumberPosition(num, layers);
                if (pos) {
                    drawSector(pos.layerIndex, pos.sectorIndex, num);
                }
            }
            
            // Draw center circle for aesthetic
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            ctx.beginPath();
            ctx.arc(cx, cy, 10 * scale, 0, 2 * Math.PI);
            ctx.fillStyle = '#2C3E50';
            ctx.fill();
        }
        
        // Animation loop
        function animate() {
            if (currentNumber <= maxNumber) {
                drawWheel();
                currentNumber++;
                setTimeout(animate, animationSpeed);
            }
        }
        
        // Start animation
        animate();
    </script>
</body>
</html>