<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Modular Arithmetic Wheel - Mod 7</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            overflow: hidden;
        }
        
        #canvas {
            max-width: 100%;
            max-height: 100%;
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Make canvas responsive
        function resizeCanvas() {
            const size = Math.min(window.innerWidth, window.innerHeight);
            canvas.width = size;
            canvas.height = size;
            return size / 800; // Scale factor relative to original 800px
        }
        
        let scale = resizeCanvas();
        window.addEventListener('resize', () => {
            scale = resizeCanvas();
            drawWheel();
        });
        
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const sectors = 7;
        
        // Define colors for each equivalence class
        const colors = [
            '#FF6B6B', // 0 mod 7 - Red
            '#4ECDC4', // 1 mod 7 - Teal
            '#45B7D1', // 2 mod 7 - Blue
            '#FFA07A', // 3 mod 7 - Light Salmon
            '#98D8C8', // 4 mod 7 - Mint
            '#F7DC6F', // 5 mod 7 - Yellow
            '#BB8FCE'  // 6 mod 7 - Purple
        ];
        
        // Layer radii (from innermost to outermost) - will be scaled
        const baseLayers = [
            { inner: 0, outer: 60, startNum: 0 },      // Core: 0-6
            { inner: 60, outer: 120, startNum: 7 },    // Layer 1: 7-13
            { inner: 120, outer: 180, startNum: 14 },  // Layer 2: 14-20
            { inner: 180, outer: 240, startNum: 21 },  // Layer 3: 21-27
            { inner: 240, outer: 300, startNum: 28 },  // Layer 4: 28-34
            { inner: 300, outer: 360, startNum: 35 }   // Layer 5: 35-41
        ];
        
        // Animation state
        let currentNumber = 0;
        const maxNumber = 41;
        const animationSpeed = 300; // milliseconds per number
        
        // Function to get scaled layers
        function getLayers() {
            return baseLayers.map(layer => ({
                inner: layer.inner * scale,
                outer: layer.outer * scale,
                startNum: layer.startNum
            }));
        }
        
        // Function to get layer and sector for a given number
        function getNumberPosition(num, layers) {
            for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {
                const layer = layers[layerIndex];
                if (num >= layer.startNum && num < layer.startNum + sectors) {
                    const sectorIndex = num - layer.startNum;
                    return { layerIndex, sectorIndex, layer };
                }
            }
            return null;
        }